<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>محفظة أعمال كهربائي</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', sans-serif;
            scroll-behavior: smooth;
            overflow: hidden;
        }
        .lights-off .light-content {
            opacity: 0;
            transform: scale(0.8);
            pointer-events: none;
        }
        .lights-on .dark-overlay {
            background-color: transparent !important;
            pointer-events: none;
        }
        .lights-on #main-overlay #main-content {
            pointer-events: auto;
        }
        .lights-on .light-switch-button {
            background-color: #facc15;
            box-shadow: 0 0 15px 5px #facc15;
        }
        .lights-on .light-switch-button::after {
            transform: translateY(-12px);
        }
        .light-switch-button::after {
            transform: translateY(12px);
        }
        .a-scene {
            height: 100vh;
            width: 100vw;
        }
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #facc15;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 8px;
            vertical-align: middle;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .dark-overlay {
            background-color: rgba(0, 0, 0, 0.8);
            transition: background-color 1s ease-in-out;
            pointer-events: auto;
        }

        .project-card-image {
            transform: translateZ(0);
            transition: transform 0.1s ease-out;
        }
        .nav-link {
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
        }
        nav.bg-transparent {
            background-color: transparent !important;
            z-index: 20;
            position: relative;
        }
        header.bg-transparent {
            background-color: transparent !important;
        }
        #dynamic-content {
            background-color: transparent !important;
            z-index: 20;
            position: relative;
        }
        main#main-content {
            background-color: transparent !important;
        }
    </style>
</head>
<body class="bg-gray-900 lights-off transition-all duration-1000">

    <div id="aframe-container" class="fixed top-0 left-0 w-full h-full z-0">
        <a-scene embedded vr-mode-ui="enabled: false" raycaster="objects: [data-raycastable]" cursor="rayOrigin: mouse">
            <a-assets>
                <img id="sechelt-project_360_texture" src="project-1-360.jpg" crossorigin="anonymous">
                <img id="villa-project_360_texture" src="project-2-360.jpg" crossorigin="anonymous">
            </a-assets>

            <a-sky id="interactive-sky" src="#sechelt-project_360_texture" rotation="0 -90 0" data-raycastable animation="property: rotation; to: 0 270 0; dur: 30000; easing: linear; loop: true;"></a-sky>
            
            <a-sphere id="reflective-sphere" src="#sechelt-project_360_texture" radius="1" position="0 1.6 -3"
                material="shader: standard; metalness: 0.8; roughness: 0.1; color: #fff; envMap: #sechelt-project_360_texture"
                animation="property: rotation; to: 0 -360 0; dur: 15000; easing: linear; loop: true">
            </a-sphere>
            
            <a-light type="ambient" color="#BBB"></a-light>
            <a-light type="directional" color="#FFF" intensity="0.5" position="-0.5 1 1"></a-light>
        </a-scene>
    </div>

    <div id="main-overlay" class="fixed top-0 left-0 w-full h-full z-10 flex flex-col items-center justify-center p-4 dark-overlay transition-colors duration-1000">
        
        <div id="intro-section" class="text-center">
            <div class="mb-8">
                <div id="light-switch" class="relative w-20 h-32 bg-gray-700 rounded-lg shadow-lg mx-auto border-4 border-gray-800 flex items-center justify-center cursor-pointer" role="button" aria-label="اضغط لتشغيل النور">
                    <div class="light-switch-button relative w-8 h-12 bg-gray-500 rounded transition-all duration-300 ease-in-out after:content-[''] after:absolute after:w-full after:h-1/2 after:bg-gray-600 after:left-0 after:rounded"></div>
                </div>
                <p id="switch-text" class="text-white mt-4 text-lg font-bold transition-opacity duration-500">اضغط لتشغيل النور واستكشاف مشاريعي</p>
            </div>
        </div>

        <main id="main-content" class="light-content w-full max-w-5xl text-center transition-all duration-700 ease-in-out relative z-20 bg-transparent">
            <header class="mb-12 bg-transparent">
                <div class="inline-block p-4 bg-yellow-400 rounded-full shadow-2xl mb-6">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-gray-800" fill="none" viewBox="0 0 24 24" stroke="currentColor" role="img" aria-labelledby="icon-title">
                        <title id="icon-title">رمز مصباح كهربائي</title>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                    </svg>
                </div>
                <h1 class="text-5xl font-extrabold text-gray-800">مرحباً بك في عالمي الكهربائي</h1>
                <p class="mt-4 text-xl text-gray-600">حيث تلتقي الدقة بالإبداع لإنارة مشاريعك</p>
            </header>

            <nav class="mb-12 bg-transparent" role="navigation" aria-label="التنقل الرئيسي">
                <ul class="flex items-center justify-center space-x-4 rtl:space-x-reverse">
                    <li><a href="#about" class="nav-link text-white hover:text-yellow-500 font-semibold text-lg transition-colors pb-1 border-b-2 border-transparent hover:border-yellow-500">عني</a></li>
                    <li><a href="#projects" class="nav-link text-white hover:text-yellow-500 font-semibold text-lg transition-colors pb-1 border-b-2 border-transparent hover:border-yellow-500">أعمالي</a></li>
                    <li><a href="#services" class="nav-link text-white hover:text-yellow-500 font-semibold text-lg transition-colors pb-1 border-b-2 border-transparent hover:border-yellow-500">خدماتي</a></li>
                    <li><a href="#contact" class="nav-link text-white hover:text-yellow-500 font-semibold text-lg transition-colors pb-1 border-b-2 border-transparent hover:border-yellow-500">اتصل بي</a></li>
                </ul>
            </nav>
            
            <div id="dynamic-content" class="p-8 rounded-2xl shadow-xl overflow-y-auto max-h-[70vh]">
                 <p class="text-gray-700 text-lg leading-relaxed">
                    هنا سيتم عرض المحتوى الرئيسي للموقع. يمكنك التنقل بين الأقسام المختلفة باستخدام القائمة أعلاه لاستكشاف المزيد عن خبراتي، والاطلاع على المشاريع التي أنجزتها، والخدمات التي أقدمها. كل مشروع هو قصة نجاح تجمع بين الحلول الهندسية المبتكرة والتنفيذ الدقيق لضمان الأمان والكفاءة.
                </p>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            try {
                const lightSwitch = document.getElementById('light-switch');
                const body = document.body;
                const introSection = document.getElementById('intro-section');
                const mainOverlay = document.getElementById('main-overlay'); 
                const dynamicContentContainer = document.getElementById('dynamic-content');
                const interactiveSky = document.getElementById('interactive-sky');
                const reflectiveSphere = document.getElementById('reflective-sphere');
                const mainContent = document.getElementById('main-content');
                
                let currentActiveProject = 'sechelt-project';
                
                const projectsData = {
                    'sechelt-project': {
                        title: 'مشروع مجمع سكني حديث (صورة 360)',
                        description: `
                            <p class="text-gray-700 text-lg leading-relaxed text-right mb-4">
                                قمت في هذا المشروع بتصميم وتنفيذ نظام كهربائي متكامل لمجمع سكني حديث، مع التركيز على الكفاءة الطاقوية والسلامة. تضمن المشروع تركيب لوحات توزيع كهربائية متقدمة، وأنظمة إضاءة LED موفرة للطاقة، بالإضافة إلى بنية تحتية جاهزة لدمج حلول المنازل الذكية مستقبلاً.
                            </p>
                            <p class="text-gray-700 text-lg leading-relaxed text-right">
                                التحدي الأكبر كان في دمج جميع الأنظمة بطريقة متناسقة وفعالة، مع الحفاظ على جمالية التصميم الداخلي والخارجي للمجمع. النتيجة كانت نظامًا كهربائياً موثوقًا يضمن الراحة والأمان للسكان، مع فواتير طاقة أقل بفضل التصميم المبتكر.
                            </p>
                        `,
                        cardImage: 'https://placehold.co/400x250/3498db/ffffff?text=مجمع+سكني',
                    },
                    'villa-project': { 
                        title: 'مشروع فيلا فاخرة',
                        description: `
                            <p class="text-gray-700 text-lg leading-relaxed text-right mb-4">
                                تصميم وتركيب نظام كهربائي متكامل لفيلا فاخرة، مع دمج أنظمة أتمتة منزلية متقدمة (Smart Home). شمل العمل توزيع الإضاءة، أنظمة التكييف المركزي، وشبكة أمان متطورة.
                            </p>
                            <p class="text-gray-700 text-lg leading-relaxed text-right">
                                تم تنفيذ المشروع بأعلى معايير الجودة لضمان تجربة معيشية عصرية ومريحة، مع التركيز على الكفاءة الطاقوية والتحكم الكامل من خلال التطبيقات الذكية.
                            </p>
                        `,
                        cardImage: 'https://placehold.co/400x250/2ecc71/ffffff?text=فيلا+فاخرة',
                    }
                };
                
                // FIXED: Using the user's correct code for the sphere, and updating it via JS
                const updateAFrameTextures = (projectId) => {
                    const skyTextureId = `${projectId}_360_texture`;
                    interactiveSky.setAttribute('src', `#${skyTextureId}`);
                    // Updated the sphere's src and envMap with the new project image.
                    reflectiveSphere.setAttribute('src', `#${skyTextureId}`);
                    reflectiveSphere.setAttribute('material', `shader: standard; metalness: 0.8; roughness: 0.1; color: #fff; envMap: #${skyTextureId}`);
                };


                const scene = document.querySelector('a-scene');
                if (scene) {
                    scene.addEventListener('loaded', () => {
                        updateAFrameTextures(currentActiveProject);
                    });
                }


                lightSwitch.addEventListener('click', () => {
                    if (body.classList.contains('lights-off')) {
                        body.classList.remove('lights-off');
                        body.classList.add('lights-on');
                        
                        introSection.style.transition = 'opacity 0.5s, transform 0.5s';
                        introSection.style.opacity = '0';
                        introSection.style.transform = 'scale(0.8)';
                        
                        mainOverlay.style.pointerEvents = 'none';
                        mainContent.style.pointerEvents = 'auto';

                        setTimeout(() => {
                            introSection.style.display = 'none';
                            mainContent.style.opacity = '1';
                            mainContent.style.transform = 'scale(1)';
                            loadProjectsSection(); 
                        }, 500);
                    }
                });
                
                interactiveSky.addEventListener('click', () => {
                    if (body.classList.contains('lights-on') && document.getElementById('project-cards-container')) {
                         showProjectDetails(currentActiveProject);
                    }
                });

                const generateTextWithGemini = async (prompt, targetElementId) => {
                    const targetElement = document.getElementById(targetElementId);
                    if (!targetElement) return;

                    const loadingSpinner = document.createElement('div');
                    loadingSpinner.className = 'loading-spinner mx-auto my-4';
                    targetElement.innerHTML = '';
                    targetElement.appendChild(loadingSpinner);

                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = { contents: chatHistory };
                    const apiKey = "ضع_مفتاح_API_الخاص_بك_هنا"; 
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

                    let response = null;
                    let result = null;
                    let retries = 0;
                    const maxRetries = 3;
                    const baseDelay = 1000; 

                    while (retries < maxRetries) {
                        try {
                            response = await fetch(apiUrl, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(payload)
                            });

                            if (!response.ok) {
                                if (response.status === 400 || response.status === 403) {
                                    const errorBody = await response.json();
                                    targetElement.innerHTML = `<p class="text-red-500 text-lg">خطأ: تأكد من أن مفتاح API صحيح وصالح. (${errorBody.error.message})</p>`;
                                    return;
                                }
                                throw new Error(`Gemini API returned non-OK status: ${response.status}`);
                            }
                            
                            result = await response.json();

                            if (result.candidates && result.candidates.length > 0 &&
                                result.candidates[0].content && result.candidates[0].content.parts &&
                                result.candidates[0].content.parts.length > 0) {
                                const text = result.candidates[0].content.parts[0].text;
                                targetElement.innerHTML = `<p class="text-gray-700 text-lg leading-relaxed text-right">${text}</p>`;
                                return;
                            } else {
                                targetElement.innerHTML = '<p class="text-red-500 text-lg">حدث خطأ في جلب الرد من Gemini: بنية الرد غير متوقعة.</p>';
                                return;
                            }
                        } catch (error) {
                            console.error(`Gemini API Fetch Error (Attempt ${retries + 1}):`, error);
                            retries++;
                            if (retries < maxRetries) {
                                const delay = baseDelay * Math.pow(2, retries - 1);
                                await new Promise(res => setTimeout(res, delay));
                            } else {
                                targetElement.innerHTML = `<p class="text-red-500 text-lg">حدث خطأ في الاتصال بخدمة Gemini بعد عدة محاولات: ${error.message}</p>`;
                            }
                        }
                    }
                };

                const loadProjectsSection = () => {
                    dynamicContentContainer.innerHTML = '';
                    const sectionContent = document.createElement('div');
                    sectionContent.className = 'projects-content';
                    sectionContent.innerHTML = `
                        <h2 class="text-3xl font-bold text-gray-800 mb-4">أعمالي</h2>
                        <p class="text-gray-700 text-lg leading-relaxed text-right mb-8">
                            استكشف بعضًا من أبرز مشاريعي الكهربائية.
                            <br class="mt-2">
                            <span class="font-bold text-yellow-600">انقر على الخلفية البانورامية (360) لرؤية المزيد من التفاصيل حول المشروع المعروض حاليًا.</span>
                        </p>
                        <div id="project-cards-container" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                            <div class="bg-gray-100 p-2 rounded-lg text-right shadow-md cursor-pointer hover:bg-gray-200 transition-colors project-card" data-project-id="villa-project">
                                <img src="${projectsData['villa-project'].cardImage}" alt="مشروع فيلا فاخرة" class="w-full h-40 object-cover rounded-lg mb-2 project-card-image">
                                <h3 class="font-bold text-xl mb-2">مشروع فيلا سكنية فاخرة</h3>
                                <p class="text-gray-600 text-sm">تصميم وتنفيذ نظام كهربائي متكامل مع حلول إضاءة ذكية ونظام أمان متقدم.</p>
                            </div>
                            <div class="bg-gray-100 p-2 rounded-lg text-right shadow-md cursor-pointer hover:bg-gray-200 transition-colors project-card" data-project-id="sechelt-project">
                                <img src="${projectsData['sechelt-project'].cardImage}" alt="تحديث مجمع تجاري" class="w-full h-40 object-cover rounded-lg mb-2 project-card-image">
                                <h3 class="font-bold text-xl mb-2">تحديث البنية التحتية لمجمع تجاري</h3>
                                <p class="text-gray-600 text-sm">تركيب لوحات التوزيع الرئيسية، أنظمة الطاقة الاحتياطية، وحلول توفير الطاقة.</p>
                            </div>
                        </div>
                        <div class="mt-8 p-6 bg-yellow-50 rounded-lg shadow-inner">
                            <h3 class="text-2xl font-bold text-gray-800 mb-4">✨ محسن وصف المشروع</h3>
                            <textarea id="project-input" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-400 mb-4 text-right" rows="4" placeholder="اكتب وصفًا موجزًا لمشروعك هنا (مثال: تركيب نظام إضاءة LED في مكتب حديث)."></textarea>
                            <button id="enhance-project-btn" class="bg-yellow-400 text-gray-800 font-bold py-3 px-6 rounded-lg hover:bg-yellow-500 transition-colors w-full md:w-auto">
                                ✨ تفاصيل المشروع
                            </button>
                            <div id="enhanced-project-output" class="mt-6 p-4 bg-white rounded-lg shadow-md text-gray-700 text-lg leading-relaxed text-right min-h-[100px] flex items-center justify-center">
                                <p>سيظهر الوصف المحسّن هنا.</p>
                            </div>
                        </div>
                    `;
                    dynamicContentContainer.appendChild(sectionContent);
                    document.getElementById('enhance-project-btn')?.addEventListener('click', () => {
                        const projectInput = document.getElementById('project-input').value;
                        if (projectInput.trim()) {
                            generateTextWithGemini(`وسع الوصف التالي لمشروع كهربائي، واجعله احترافيًا، مع إبراز الميزات الرئيسية والفوائد للعملاء: ${projectInput}`, 'enhanced-project-output');
                        } else {
                            document.getElementById('enhanced-project-output').innerHTML = '<p class="text-red-500 text-lg">الرجاء إدخال وصف موجز للمشروع.</p>';
                        }
                    });

                    document.querySelectorAll('.project-card').forEach(card => {
                        card.addEventListener('click', () => {
                            const projectId = card.dataset.projectId;
                            if (projectId) {
                                currentActiveProject = projectId;
                                updateAFrameTextures(currentActiveProject);
                            }
                        });
                    });

                    dynamicContentContainer.scrollTop = 0;
                    dynamicContentContainer.removeEventListener('scroll', handleProjectScroll);
                    initParallax();
                };

                const showProjectDetails = (projectId) => {
                    const project = projectsData[projectId];
                    if (!project) return;

                    currentActiveProject = projectId;
                    updateAFrameTextures(currentActiveProject);

                    dynamicContentContainer.innerHTML = '';
                    const sectionContent = document.createElement('div');
                    sectionContent.className = 'project-details-content';
                    sectionContent.innerHTML = `
                        <button id="back-to-projects-btn" class="bg-gray-200 text-gray-800 font-bold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors mb-6 flex items-center" aria-label="العودة إلى صفحة المشاريع">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 rtl:rotate-180 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <title>سهم العودة</title>
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                            </svg>
                            العودة إلى الأعمال
                        </button>
                        <h2 class="text-3xl font-bold text-gray-800 mb-4 text-right">${project.title}</h2>
                        <div class="mb-8 text-right">
                            ${project.description}
                        </div>
                        <div class="mt-8 p-6 bg-yellow-50 rounded-lg shadow-inner">
                            <h3 class="text-2xl font-bold text-gray-800 mb-4">✨ محسن وصف المشروع</h3>
                            <textarea id="project-input" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-400 mb-4 text-right" rows="4" placeholder="اكتب وصفًا موجزًا لمشروعك هنا (مثال: تركيب نظام إضاءة LED في مكتب حديث)."></textarea>
                            <button id="enhance-project-btn" class="bg-yellow-400 text-gray-800 font-bold py-3 px-6 rounded-lg hover:bg-yellow-500 transition-colors w-full md:w-auto">
                                ✨ تفاصيل المشروع
                            </button>
                            <div id="enhanced-project-output" class="mt-6 p-4 bg-white rounded-lg shadow-md text-gray-700 text-lg leading-relaxed text-right min-h-[100px] flex items-center justify-center">
                                <p>سيظهر الوصف المحسّن هنا.</p>
                            </div>
                        </div>
                    `;
                    dynamicContentContainer.appendChild(sectionContent);

                    document.getElementById('enhance-project-btn')?.addEventListener('click', () => {
                        const projectInput = document.getElementById('project-input').value;
                        if (projectInput.trim()) {
                            generateTextWithGemini(`وسع الوصف التالي لمشروع كهربائي، واجعله احترافيًا، مع إبراز الميزات الرئيسية والفوائد للعملاء: ${projectInput}`, 'enhanced-project-output');
                        } else {
                            document.getElementById('enhanced-project-output').innerHTML = '<p class="text-red-500 text-lg">الرجاء إدخال وصف موجز للمشروع.</p>';
                        }
                    });

                    document.getElementById('back-to-projects-btn')?.addEventListener('click', loadProjectsSection);
                    dynamicContentContainer.scrollTop = 0;
                    dynamicContentContainer.addEventListener('scroll', handleProjectScroll);
                    window.removeEventListener('deviceorientation', handleDeviceOrientation);
                };

                const handleProjectScroll = () => {
                    const { scrollTop, scrollHeight, clientHeight } = dynamicContentContainer;
                    if (scrollTop + clientHeight >= scrollHeight - 5) {
                        loadProjectsSection();
                    }
                };

                let initialGamma = null;
                let initialBeta = null;

                const handleDeviceOrientation = (event) => {
                    try {
                        const images = document.querySelectorAll('.project-card-image');
                        if (images.length === 0 || !body.classList.contains('lights-on')) return;

                        const gamma = typeof event.gamma === 'number' ? event.gamma : 0;
                        const beta = typeof event.beta === 'number' ? event.beta : 0;

                        if (initialGamma === null || initialBeta === null) {
                            initialGamma = gamma;
                            initialBeta = beta;
                        }

                        const deltaGamma = gamma - initialGamma;
                        const deltaBeta = beta - initialBeta;

                        const sensitivity = 0.3;
                        const moveX = -deltaGamma * sensitivity;
                        const moveY = -deltaBeta * sensitivity;

                        images.forEach(image => {
                            image.style.transform = `translate(${moveX}px, ${moveY}px)`;
                        });
                    } catch (e) {
                        console.error("Error in handleDeviceOrientation:", e);
                    }
                };

                const initParallax = () => {
                    initialGamma = null;
                    initialBeta = null;

                    if (typeof DeviceOrientationEvent.requestPermission === 'function') {
                        DeviceOrientationEvent.requestPermission()
                            .then(permissionState => {
                                if (permissionState === 'granted') {
                                    window.addEventListener('deviceorientation', handleDeviceOrientation);
                                } else {
                                    console.warn('Device orientation permission denied.');
                                }
                            })
                            .catch(err => console.error('Error requesting device orientation permission:', err));
                    } else {
                        window.addEventListener('deviceorientation', handleDeviceOrientation);
                    }
                };

                const navLinks = document.querySelectorAll('.nav-link');
                navLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        const sectionId = e.target.getAttribute('href').substring(1);
                        dynamicContentContainer.innerHTML = '';
                        dynamicContentContainer.removeEventListener('scroll', handleProjectScroll);
                        window.removeEventListener('deviceorientation', handleDeviceOrientation);

                        switch(sectionId) {
                            case 'about':
                                dynamicContentContainer.innerHTML = `
                                    <h2 class="text-3xl font-bold text-gray-800 mb-4">عني</h2>
                                    <p class="text-gray-700 text-lg leading-relaxed text-right">مهندس كهربائي متخصص في تصميم وتنفيذ الأنظمة الكهربائية الحديثة والآمنة للمباني السكنية والتجارية. أمتلك خبرة واسعة في حلول الطاقة المتجددة والمنازل الذكية، مع التزام كامل بأعلى معايير الجودة والسلامة. أسعى دائمًا لتقديم حلول مبتكرة وفعالة تلبي احتياجات العملاء وتتجاوز توقعاتهم.</p>
                                    <p class="text-gray-700 text-lg leading-relaxed text-right mt-4">شغفي بالكهرباء يمتد إلى البحث والتطوير، وأنا أؤمن بأهمية التعليم المستمر لمواكبة أحدث التقنيات في هذا المجال الحيوي.</p>
                                    <div class="mt-8 p-6 bg-yellow-50 rounded-lg shadow-inner">
                                        <h3 class="text-2xl font-bold text-gray-800 mb-4">✨ مُنشئ السيرة الذاتية</h3>
                                        <textarea id="bio-input" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-400 mb-4 text-right" rows="4" placeholder="اكتب بعض الكلمات المفتاحية عن خبرتك وشغفك (مثال: خبرة 10 سنوات، تصميم منازل ذكية، طاقة شمسية، شغف بالابتكار)."></textarea>
                                        <button id="generate-bio-btn" class="bg-yellow-400 text-gray-800 font-bold py-3 px-6 rounded-lg hover:bg-yellow-500 transition-colors w-full md:w-auto">
                                            ✨ أنشئ سيرتي الذاتية
                                        </button>
                                        <div id="generated-bio-output" class="mt-6 p-4 bg-white rounded-lg shadow-md text-gray-700 text-lg leading-relaxed text-right min-h-[100px] flex items-center justify-center">
                                            <p>سيظهر الوصف المحسّن هنا.</p>
                                        </div>
                                    </div>
                                `;
                                document.getElementById('generate-bio-btn')?.addEventListener('click', () => {
                                    const bioInput = document.getElementById('bio-input').value;
                                    if (bioInput.trim()) {
                                        generateTextWithGemini(`اكتب سيرة ذاتية احترافية وجذابة لمهندس كهربائي بناءً على الكلمات المفتاحية التالية: ${bioInput}. اجعلها ملهمة وتبرز الخبرة والمهارة.`, 'generated-bio-output');
                                    } else {
                                        document.getElementById('generated-bio-output').innerHTML = '<p class="text-red-500 text-lg">الرجاء إدخال كلمات مفتاحية لوصف سيرتك الذاتية.</p>';
                                    }
                                });
                                break;
                            case 'projects':
                                loadProjectsSection();
                                return;
                            case 'services':
                                dynamicContentContainer.innerHTML = `
                                    <h2 class="text-3xl font-bold text-gray-800 mb-4">خدماتي</h2>
                                    <ul class="list-disc list-inside text-lg text-gray-700 text-right space-y-2 mb-8">
                                        <li>تصميم المخططات الكهربائية للمباني السكنية والتجارية</li>
                                        <li>تركيب وصيانة الأنظمة الكهربائية المتكاملة</li>
                                        <li>تطوير حلول المنازل الذكية والتحكم الآلي</li>
                                        <li>تركيب وصيانة أنظمة الطاقة الشمسية</li>
                                        <li>فحص السلامة الكهربائية وإصدار التقارير</li>
                                        <li>حلول توفير الطاقة والاستشارات الكهربائية</li>
                                    </ul>
                                    <div class="mt-8 p-6 bg-yellow-50 rounded-lg shadow-inner mb-8">
                                        <h3 class="text-2xl font-bold text-gray-800 mb-4">✨ شارح الخدمات الكهربائية</h3>
                                        <textarea id="service-input" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-400 mb-4 text-right" rows="4" placeholder="اسأل عن خدمة كهربائية أو مفهوم (مثال: ما هي فوائد نظام الإضاءة الذكية؟)"></textarea>
                                        <button id="explain-service-btn" class="bg-yellow-400 text-gray-800 font-bold py-3 px-6 rounded-lg hover:bg-yellow-500 transition-colors w-full md:w-auto">
                                            ✨ اشرح لي
                                        </button>
                                        <div id="service-explanation-output" class="mt-6 p-4 bg-white rounded-lg shadow-md text-gray-700 text-lg leading-relaxed text-right min-h-[100px] flex items-center justify-center">
                                            <p>سيظهر الشرح هنا.</p>
                                        </div>
                                    </div>
                                    <div class="p-6 bg-yellow-50 rounded-lg shadow-inner">
                                        <h3 class="text-2xl font-bold text-gray-800 mb-4">✨ شارح المصطلحات الكهربائية</h3>
                                        <textarea id="terminology-input" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-400 mb-4 text-right" rows="4" placeholder="اكتب مصطلحاً كهربائياً (مثال: الدائرة القصيرة)."></textarea>
                                        <button id="explain-terminology-btn" class="bg-yellow-400 text-gray-800 font-bold py-3 px-6 rounded-lg hover:bg-yellow-500 transition-colors w-full md:w-auto">
                                            ✨ اشرح المصطلح
                                        </button>
                                        <div id="terminology-explanation-output" class="mt-6 p-4 bg-white rounded-lg shadow-md text-gray-700 text-lg leading-relaxed text-right min-h-[100px] flex items-center justify-center">
                                            <p>سيظهر شرح المصطلح هنا مع مثال.</p>
                                        </div>
                                    </div>
                                `;
                                document.getElementById('explain-service-btn')?.addEventListener('click', () => {
                                    const serviceInput = document.getElementById('service-input').value;
                                    if (serviceInput.trim()) {
                                        generateTextWithGemini(`اشرح خدمة أو مفهومًا كهربائيًا باللغة العربية بعبارات بسيطة وواضحة، مع إبراز أهميته: ${serviceInput}`, 'service-explanation-output');
                                    } else {
                                        document.getElementById('service-explanation-output').innerHTML = '<p class="text-red-500 text-lg">الرجاء إدخال سؤال حول الخدمة.</p>';
                                    }
                                });
                                document.getElementById('explain-terminology-btn')?.addEventListener('click', () => {
                                    const terminologyInput = document.getElementById('terminology-input').value;
                                    if (terminologyInput.trim()) {
                                        generateTextWithGemini(`اشرح المصطلح الكهربائي التالي باللغة العربية بعبارات بسيطة وواضحة، وقدم مثالاً عملياً على تطبيقه: ${terminologyInput}`, 'terminology-explanation-output');
                                    } else {
                                        document.getElementById('terminology-explanation-output').innerHTML = '<p class="text-red-500 text-lg">الرجاء إدخال مصطلح كهربائي.</p>';
                                    }
                                });
                                break;
                            case 'contact':
                                dynamicContentContainer.innerHTML = `
                                    <h2 class="text-3xl font-bold text-gray-800 mb-4">اتصل بي</h2>
                                    <p class="text-gray-700 text-lg text-right">هل لديك مشروع جديد أو تحتاج إلى استشارة؟ لا تتردد في التواصل معي لبدء محادثة حول كيفية تحقيق رؤيتك.</p>
                                    <div class="mt-6 space-y-4">
                                        <a href="mailto:email@example.com" class="inline-block bg-yellow-400 text-gray-800 font-bold py-3 px-6 rounded-lg hover:bg-yellow-500 transition-colors shadow-md">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <title>أرسل بريداً إلكترونياً</title>
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8m-2 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h14a2 2 0 012 2v11z" />
                                            </svg>
                                            أرسل بريداً إلكترونياً
                                        </a>
                                        <p class="text-gray-700 text-lg text-right">أو اتصل بي على: <span class="font-semibold text-gray-900">+966 50 123 4567</span></p>
                                    </div>
                                    <div class="mt-8 p-6 bg-yellow-50 rounded-lg shadow-inner">
                                        <h3 class="text-2xl font-bold text-gray-800 mb-4">✨ مُنشئ شهادات العملاء</h3>
                                        <textarea id="testimonial-input" class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-yellow-400 mb-4 text-right" rows="4" placeholder="اكتب معلومات عن العميل والمشروع والنتيجة الإيجابية (مثال: العميل: شركة X، المشروع: إضاءة مكتب، النتيجة: توفير كبير للطاقة)."></textarea>
                                        <button id="generate-testimonial-btn" class="bg-yellow-400 text-gray-800 font-bold py-3 px-6 rounded-lg hover:bg-yellow-500 transition-colors w-full md:w-auto">
                                            ✨ أنشئ الشهادة
                                        </button>
                                        <div id="generated-testimonial-output" class="mt-6 p-4 bg-white rounded-lg shadow-md text-gray-700 text-lg leading-relaxed text-right min-h-[100px] flex items-center justify-center">
                                            <p>سيظهر نص الشهادة هنا.</p>
                                        </div>
                                    </div>
                                `;
                                document.getElementById('generate-testimonial-btn')?.addEventListener('click', () => {
                                    const testimonialInput = document.getElementById('testimonial-input').value;
                                    if (testimonialInput.trim()) {
                                        generateTextWithGemini(`اكتب شهادة عميل مقنعة ومهنية لمهندس كهربائي بناءً على التفاصيل التالية: ${testimonialInput}. اجعلها إيجابية وموجهة نحو إبراز جودة الخدمة.`, 'generated-testimonial-output');
                                    } else {
                                        document.getElementById('generated-testimonial-output').innerHTML = '<p class="text-red-500 text-lg">الرجاء إدخال تفاصيل العميل والمشروع.</p>';
                                    }
                                });
                                break;
                        }
                        dynamicContentContainer.scrollTop = 0;
                    });
                });
            } catch (e) {
                console.error("Error in DOMContentLoaded block:", e);
                const errorDiv = document.createElement('div');
                errorDiv.className = 'fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-red-600 text-white p-4 rounded-lg shadow-lg z-50';
                errorDiv.textContent = 'حدث خطأ غير متوقع في تحميل الصفحة. الرجاء إعادة المحاولة.';
                document.body.appendChild(errorDiv);
            }
        });
    </script>
</body>
</html>